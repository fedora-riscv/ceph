--- ceph-15.2.8/src/CMakeLists.txt.orig	2021-01-25 13:34:31.122206146 -0500
+++ ceph-15.2.8/src/CMakeLists.txt	2021-01-25 13:37:12.863612216 -0500
@@ -23,10 +23,16 @@
 set(datadir ${CEPH_INSTALL_DATADIR})
 set(prefix ${CMAKE_INSTALL_PREFIX})
 
-add_definitions("-DHAVE_CONFIG_H -D__CEPH__ -D_REENTRANT -D_THREAD_SAFE -D__STDC_FORMAT_MACROS")
-add_definitions("-D_FILE_OFFSET_BITS=64")
+add_definitions(-DHAVE_CONFIG_H
+  -D__CEPH__
+  -D_REENTRANT
+  -D_THREAD_SAFE
+  -D__STDC_FORMAT_MACROS
+  -D_FILE_OFFSET_BITS=64
+  -DBOOST_ASIO_DISABLE_THREAD_KEYWORD_EXTENSION
+  -DBOOST_ASIO_USE_TS_EXECUTOR_AS_DEFAULT)
 if(LINUX)
-  add_definitions("-D_GNU_SOURCE")
+  add_definitions(-D_GNU_SOURCE)
 endif()
 
 set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall")
